import"./modulepreload-polyfill-3cfb730f.js";import{c as y,d as p,r as S,l as R,p as k,h,j as w,m as M}from"./index-41b36d62.js";function x(e,t,o){o===void 0&&(o={});var r=y(e),s=y(t),c=p(s[1]-r[1]),n=p(s[0]-r[0]),u=p(r[1]),i=p(s[1]),l=Math.pow(Math.sin(c/2),2)+Math.pow(Math.sin(n/2),2)*Math.cos(u)*Math.cos(i);return S(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),o.units)}function g(e,t,o,r){r===void 0&&(r={});var s=y(e),c=p(s[0]),n=p(s[1]),u=p(o),i=R(t,r.units),l=Math.asin(Math.sin(n)*Math.cos(i)+Math.cos(n)*Math.sin(i)*Math.cos(u)),b=c+Math.atan2(Math.sin(u)*Math.sin(i)*Math.cos(n),Math.cos(i)-Math.sin(n)*Math.sin(l)),L=h(b),F=h(l);return k([L,F],r.properties)}function T(e,t,o){o===void 0&&(o={});for(var r=o.steps||64,s=o.properties?o.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},c=[],n=0;n<r;n++)c.push(g(e,t,n*-360/r,o).geometry.coordinates);return c.push(c[0]),w([c],s)}const C={radius:10},v=()=>C.radius,j=e=>C.radius=e,m=({center:e,steps:t})=>T(e,v(),{steps:t}),d=e=>{const t=e.target,o=document.getElementById("label-radius"),{lat:r,lng:s}=t.getCenter(),{lat:c,lng:n}=e.lngLat,u=t.getSource("point-src"),i=t.getSource("circle-src");t.getCanvas().style.cursor="grabbing";const l=x([n,r],[s,r]);u.setData({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[n,u._data.features[0].geometry.coordinates[1]]}}]}),o.innerHTML=`Radius: ${l.toFixed(2)} km`,j(l),i.setData({type:"FeatureCollection",features:[m({center:[s,r],steps:100})]})},f=e=>{const t=e.target;e.lngLat,t.getCanvas().style.cursor="",t.off("mousemove",d),t.off("touchmove",d)};M.accessToken="pk.eyJ1Ijoib3J1Y2JlIiwiYSI6ImNsbTZuZGxrZjBoN3czamxnM2V6aHBiZGEifQ.Fami0mGh65buxFjfJ0Ppjg";const a=new M.Map({center:[29,41.015137],container:"mapContainer",style:"mapbox://styles/mapbox/streets-v12",zoom:10}),D=document.getElementById("label-radius");D.innerHTML=`Radius: ${v().toFixed(2)} km`;a.on("load",()=>{a.addSource("point-src",{type:"geojson",data:{type:"FeatureCollection",features:[g([29,41.015137],10,90,{units:"kilometers"})]}}),a.addSource("circle-src",{type:"geojson",data:{type:"FeatureCollection",features:[m({center:[29,41.015137],steps:100})]}}),a.addLayer({id:"circle-lyr",type:"fill",source:"circle-src",paint:{"fill-color":"red","fill-opacity":.25}}),a.addLayer({id:"circle-outline-lyr",type:"line",source:"circle-src",paint:{"line-color":"red","line-width":2}}),a.addLayer({id:"point-lyr",type:"circle",source:"point-src",paint:{"circle-radius":25,"circle-color":"purple","circle-opacity":.5,"circle-stroke-color":"purple","circle-stroke-width":2}}),a.on("mouseenter","point-lyr",()=>{a.setPaintProperty("point-lyr","circle-color","#3bb2d0"),a.getCanvas().style.cursor="move"}),a.on("mouseleave","point-lyr",()=>{a.setPaintProperty("point-lyr","circle-color","purple"),a.getCanvas().style.cursor=""}),a.on("mousedown","point-lyr",e=>{e.preventDefault(),a.getCanvas().style.cursor="grab",a.on("mousemove",d),a.once("mouseup",f)}),a.on("touchstart","point-lyr",e=>{e.points.length===1&&(e.preventDefault(),a.on("touchmove",d),a.once("touchend",f))}),a.on("move",e=>{const t=e.target,{lat:o,lng:r}=t.getCenter(),s=t.getSource("point-src"),c=t.getSource("circle-src");s.setData({type:"FeatureCollection",features:[g([r,o],v(),90,{units:"kilometers"})]}),c.setData({type:"FeatureCollection",features:[m({center:[r,o],steps:100})]})})});
