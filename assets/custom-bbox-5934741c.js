import"./modulepreload-polyfill-3cfb730f.js";import{c as Y,g as b,m as C}from"./index-4df36c28.js";function A(a,y){y===void 0&&(y={});var i=Number(a[0]),o=Number(a[1]),n=Number(a[2]),M=Number(a[3]);if(a.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var v=[i,o],c=[i,M],m=[n,M],g=[n,o];return Y([[v,g,m,c,v]],y.properties,{bbox:a,id:y.id})}var j={exports:{}};(function(a,y){var i=function(){var o={},n=Math.PI/180,M=180/Math.PI,v=6378137,c=20037508342789244e-9;function m(e){return Number(e)===e&&e%1!==0}function g(e){if(e=e||{},this.size=e.size||256,this.expansion=e.antimeridian===!0?2:1,!o[this.size]){var t=this.size,r=o[this.size]={};r.Bc=[],r.Cc=[],r.zc=[],r.Ac=[];for(var s=0;s<30;s++)r.Bc.push(t/360),r.Cc.push(t/(2*Math.PI)),r.zc.push(t/2),r.Ac.push(t),t*=2}this.Bc=o[this.size].Bc,this.Cc=o[this.size].Cc,this.zc=o[this.size].zc,this.Ac=o[this.size].Ac}return g.prototype.px=function(e,t){if(m(t)){var r=this.size*Math.pow(2,t),s=r/2,x=r/360,d=r/(2*Math.PI),p=r,h=Math.min(Math.max(Math.sin(n*e[1]),-.9999),.9999),l=s+e[0]*x,f=s+.5*Math.log((1+h)/(1-h))*-d;return l>p*this.expansion&&(l=p*this.expansion),f>p&&(f=p),[l,f]}else{var s=this.zc[t],h=Math.min(Math.max(Math.sin(n*e[1]),-.9999),.9999),l=Math.round(s+e[0]*this.Bc[t]),f=Math.round(s+.5*Math.log((1+h)/(1-h))*-this.Cc[t]);return l>this.Ac[t]*this.expansion&&(l=this.Ac[t]*this.expansion),f>this.Ac[t]&&(f=this.Ac[t]),[l,f]}},g.prototype.ll=function(e,t){if(m(t)){var r=this.size*Math.pow(2,t),s=r/360,x=r/(2*Math.PI),d=r/2,p=(e[1]-d)/-x,h=(e[0]-d)/s,l=M*(2*Math.atan(Math.exp(p))-.5*Math.PI);return[h,l]}else{var p=(e[1]-this.zc[t])/-this.Cc[t],h=(e[0]-this.zc[t])/this.Bc[t],l=M*(2*Math.atan(Math.exp(p))-.5*Math.PI);return[h,l]}},g.prototype.bbox=function(e,t,r,s,x){s&&(t=Math.pow(2,r)-1-t);var d=[e*this.size,(+t+1)*this.size],p=[(+e+1)*this.size,t*this.size],h=this.ll(d,r).concat(this.ll(p,r));return x==="900913"?this.convert(h,"900913"):h},g.prototype.xyz=function(e,t,r,s){s==="900913"&&(e=this.convert(e,"WGS84"));var x=[e[0],e[1]],d=[e[2],e[3]],p=this.px(x,t),h=this.px(d,t),l=[Math.floor(p[0]/this.size),Math.floor((h[0]-1)/this.size)],f=[Math.floor(h[1]/this.size),Math.floor((p[1]-1)/this.size)],w={minX:Math.min.apply(Math,l)<0?0:Math.min.apply(Math,l),minY:Math.min.apply(Math,f)<0?0:Math.min.apply(Math,f),maxX:Math.max.apply(Math,l),maxY:Math.max.apply(Math,f)};if(r){var I={minY:Math.pow(2,t)-1-w.maxY,maxY:Math.pow(2,t)-1-w.minY};w.minY=I.minY,w.maxY=I.maxY}return w},g.prototype.convert=function(e,t){return t==="900913"?this.forward(e.slice(0,2)).concat(this.forward(e.slice(2,4))):this.inverse(e.slice(0,2)).concat(this.inverse(e.slice(2,4)))},g.prototype.forward=function(e){var t=[v*e[0]*n,v*Math.log(Math.tan(Math.PI*.25+.5*e[1]*n))];return t[0]>c&&(t[0]=c),t[0]<-c&&(t[0]=-c),t[1]>c&&(t[1]=c),t[1]<-c&&(t[1]=-c),t},g.prototype.inverse=function(e){return[e[0]*M/v,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/v)))*M]},g}();a.exports=i})(j);var N=j.exports;const S=b(N),B={};function F(a,y){const i=a||256,o=y||!1,n=i+String(o);return B[n]||(B[n]=new S({size:i,antiMeridian:o})),B[n]}function E(a,y,i,o){let n=a;n.lon!==void 0&&(n=[n.lon,n.lat]);const M=F(o),v=M.px(n,y),c=M.ll([v[0]-i[0]/2,v[1]-i[1]/2],y),m=M.ll([v[0]+i[0]/2,v[1]+i[1]/2],y);return[c[0],m[1],m[0],c[1]]}const G=document.getElementById("btn-back");G.addEventListener("click",()=>{window.location.href="../index.html"});C.accessToken="pk.eyJ1Ijoib3J1Y2JlIiwiYSI6ImNsbTZuZGxrZjBoN3czamxnM2V6aHBiZGEifQ.Fami0mGh65buxFjfJ0Ppjg";const u=new C.Map({center:[29,41.015137],container:"mapContainer",style:"mapbox://styles/mapbox/streets-v12",zoom:11});u.on("load",()=>{u.addSource("polygons",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),u.addLayer({id:"polygons",source:"polygons",type:"fill",paint:{"fill-color":["get","color"],"fill-opacity":.5}}),P(),u.on("moveend",P),u.on("click",a=>{console.log(a.point,a.lngLat),console.log(a.target.unproject(a.point)),console.log(a.target.unproject({x:100,y:100})),console.log(a.target.getBounds())})});const P=()=>{const a=u.getBounds().toArray(),y=A(a.flat()),i={width:Number(u.getCanvas().style.width.replace("px","")),height:Number(u.getCanvas().style.height.replace("px",""))};let o=.65,n=.65;i.width/i.height<1&&(o=.7,n=.7);const v=E(u.getCenter().toArray(),u.getZoom(),[i.width*o,i.height*n],512),c=A(v),m={x:64,y:i.height-64},g={x:i.width-64,y:i.height-64},e={x:i.width-64,y:64},t={x:64,y:64},r=u.unproject(m),s=u.unproject(g),x=u.unproject(e),d=u.unproject(t),p={type:"Polygon",coordinates:[[r.toArray(),s.toArray(),x.toArray(),d.toArray(),r.toArray()]]};u.getSource("polygons").setData({type:"FeatureCollection",features:[{type:"Feature",properties:{color:"red"},geometry:y.geometry},{type:"Feature",properties:{color:"blue"},geometry:c.geometry},{type:"Feature",properties:{color:"green"},geometry:p}]})};
