import"./modulepreload-polyfill-3cfb730f.js";import{c as m,d,r as S,l as w,p as x,h as f,j as D,m as C}from"./index-41b36d62.js";function I(e,t,r){r===void 0&&(r={});var o=m(e),s=m(t),i=d(s[1]-o[1]),n=d(s[0]-o[0]),u=d(o[1]),c=d(s[1]),l=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(n/2),2)*Math.cos(u)*Math.cos(c);return S(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r.units)}function y(e,t,r,o){o===void 0&&(o={});var s=m(e),i=d(s[0]),n=d(s[1]),u=d(r),c=w(t,o.units),l=Math.asin(Math.sin(n)*Math.cos(c)+Math.cos(n)*Math.sin(c)*Math.cos(u)),L=i+Math.atan2(Math.sin(u)*Math.sin(c)*Math.cos(n),Math.cos(c)-Math.sin(n)*Math.sin(l)),F=f(L),R=f(l);return x([F,R],o.properties)}function T(e,t,r){r===void 0&&(r={});for(var o=r.steps||64,s=r.properties?r.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},i=[],n=0;n<o;n++)i.push(y(e,t,n*-360/o,r).geometry.coordinates);return i.push(i[0]),D([i],s)}const b={radius:5},p=()=>b.radius,j=e=>b.radius=e,v=({center:e,steps:t})=>T(e,p(),{steps:t}),g=e=>{const t=e.target,r=document.getElementById("label-radius"),{lat:o,lng:s}=t.getCenter(),{lat:i,lng:n}=e.lngLat,u=t.getSource("point-src"),c=t.getSource("circle-src");t.getCanvas().style.cursor="grabbing";const l=I([n,o],[s,o]);u.setData({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[n,u._data.features[0].geometry.coordinates[1]]}}]}),r.innerHTML=`Radius: ${l.toFixed(2)} km`,j(l),c.setData({type:"FeatureCollection",features:[v({center:[s,o],steps:100})]})},M=e=>{const t=e.target;e.lngLat,t.getCanvas().style.cursor="",t.off("mousemove",g),t.off("touchmove",g)},k=""+new URL("chevron-right-double-b7c852f4.svg",import.meta.url).href;C.accessToken="pk.eyJ1Ijoib3J1Y2JlIiwiYSI6ImNsbTZuZGxrZjBoN3czamxnM2V6aHBiZGEifQ.Fami0mGh65buxFjfJ0Ppjg";const a=new C.Map({center:[29,41.015137],container:"mapContainer",style:"mapbox://styles/mapbox/streets-v12",zoom:11}),A=document.getElementById("label-radius");A.innerHTML=`Radius: ${p().toFixed(2)} km`;let h=new Image(48,32);h.onload=()=>a.addImage("radius-change-icon",h);h.src=k;a.on("load",()=>{a.addSource("point-src",{type:"geojson",data:{type:"FeatureCollection",features:[y([29,41.015137],p(),90,{units:"kilometers"})]}}),a.addSource("circle-src",{type:"geojson",data:{type:"FeatureCollection",features:[v({center:[29,41.015137],steps:100})]}}),a.addLayer({id:"circle-lyr",type:"fill",source:"circle-src",paint:{"fill-color":"#369096","fill-opacity":.25}}),a.addLayer({id:"circle-outline-lyr",type:"line",source:"circle-src",paint:{"line-color":"#3DA0A8","line-width":2}}),a.addLayer({id:"point-lyr",source:"point-src",type:"symbol",layout:{"icon-image":"radius-change-icon","icon-size":1,"icon-allow-overlap":!0}}),a.on("mouseenter","point-lyr",()=>{a.getCanvas().style.cursor="move"}),a.on("mouseleave","point-lyr",()=>{a.getCanvas().style.cursor=""}),a.on("mousedown","point-lyr",e=>{e.preventDefault(),a.getCanvas().style.cursor="grab",a.on("mousemove",g),a.once("mouseup",M)}),a.on("touchstart","point-lyr",e=>{e.points.length===1&&(e.preventDefault(),a.on("touchmove",g),a.once("touchend",M))}),a.on("move",e=>{const t=e.target,{lat:r,lng:o}=t.getCenter(),s=t.getSource("point-src"),i=t.getSource("circle-src");s.setData({type:"FeatureCollection",features:[y([o,r],p(),90,{units:"kilometers"})]}),i.setData({type:"FeatureCollection",features:[v({center:[o,r],steps:100})]})})});
