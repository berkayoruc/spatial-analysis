import"./modulepreload-polyfill-3cfb730f.js";import{c as j,g as Y,m as P}from"./index-4df36c28.js";import{b as F}from"./index-5cd41f0c.js";function B(a,y){y===void 0&&(y={});var i=Number(a[0]),s=Number(a[1]),o=Number(a[2]),M=Number(a[3]);if(a.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var v=[i,s],l=[i,M],m=[o,M],g=[o,s];return j([[v,g,m,l,v]],y.properties,{bbox:a,id:y.id})}var C={exports:{}};(function(a,y){var i=function(){var s={},o=Math.PI/180,M=180/Math.PI,v=6378137,l=20037508342789244e-9;function m(e){return Number(e)===e&&e%1!==0}function g(e){if(e=e||{},this.size=e.size||256,this.expansion=e.antimeridian===!0?2:1,!s[this.size]){var t=this.size,r=s[this.size]={};r.Bc=[],r.Cc=[],r.zc=[],r.Ac=[];for(var c=0;c<30;c++)r.Bc.push(t/360),r.Cc.push(t/(2*Math.PI)),r.zc.push(t/2),r.Ac.push(t),t*=2}this.Bc=s[this.size].Bc,this.Cc=s[this.size].Cc,this.zc=s[this.size].zc,this.Ac=s[this.size].Ac}return g.prototype.px=function(e,t){if(m(t)){var r=this.size*Math.pow(2,t),c=r/2,x=r/360,d=r/(2*Math.PI),p=r,n=Math.min(Math.max(Math.sin(o*e[1]),-.9999),.9999),h=c+e[0]*x,f=c+.5*Math.log((1+n)/(1-n))*-d;return h>p*this.expansion&&(h=p*this.expansion),f>p&&(f=p),[h,f]}else{var c=this.zc[t],n=Math.min(Math.max(Math.sin(o*e[1]),-.9999),.9999),h=Math.round(c+e[0]*this.Bc[t]),f=Math.round(c+.5*Math.log((1+n)/(1-n))*-this.Cc[t]);return h>this.Ac[t]*this.expansion&&(h=this.Ac[t]*this.expansion),f>this.Ac[t]&&(f=this.Ac[t]),[h,f]}},g.prototype.ll=function(e,t){if(m(t)){var r=this.size*Math.pow(2,t),c=r/360,x=r/(2*Math.PI),d=r/2,p=(e[1]-d)/-x,n=(e[0]-d)/c,h=M*(2*Math.atan(Math.exp(p))-.5*Math.PI);return[n,h]}else{var p=(e[1]-this.zc[t])/-this.Cc[t],n=(e[0]-this.zc[t])/this.Bc[t],h=M*(2*Math.atan(Math.exp(p))-.5*Math.PI);return[n,h]}},g.prototype.bbox=function(e,t,r,c,x){c&&(t=Math.pow(2,r)-1-t);var d=[e*this.size,(+t+1)*this.size],p=[(+e+1)*this.size,t*this.size],n=this.ll(d,r).concat(this.ll(p,r));return x==="900913"?this.convert(n,"900913"):n},g.prototype.xyz=function(e,t,r,c){c==="900913"&&(e=this.convert(e,"WGS84"));var x=[e[0],e[1]],d=[e[2],e[3]],p=this.px(x,t),n=this.px(d,t),h=[Math.floor(p[0]/this.size),Math.floor((n[0]-1)/this.size)],f=[Math.floor(n[1]/this.size),Math.floor((p[1]-1)/this.size)],w={minX:Math.min.apply(Math,h)<0?0:Math.min.apply(Math,h),minY:Math.min.apply(Math,f)<0?0:Math.min.apply(Math,f),maxX:Math.max.apply(Math,h),maxY:Math.max.apply(Math,f)};if(r){var b={minY:Math.pow(2,t)-1-w.maxY,maxY:Math.pow(2,t)-1-w.minY};w.minY=b.minY,w.maxY=b.maxY}return w},g.prototype.convert=function(e,t){return t==="900913"?this.forward(e.slice(0,2)).concat(this.forward(e.slice(2,4))):this.inverse(e.slice(0,2)).concat(this.inverse(e.slice(2,4)))},g.prototype.forward=function(e){var t=[v*e[0]*o,v*Math.log(Math.tan(Math.PI*.25+.5*e[1]*o))];return t[0]>l&&(t[0]=l),t[0]<-l&&(t[0]=-l),t[1]>l&&(t[1]=l),t[1]<-l&&(t[1]=-l),t},g.prototype.inverse=function(e){return[e[0]*M/v,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/v)))*M]},g}();a.exports=i})(C);var N=C.exports;const S=Y(N),I={};function E(a,y){const i=a||256,s=y||!1,o=i+String(s);return I[o]||(I[o]=new S({size:i,antiMeridian:s})),I[o]}function G(a,y,i,s){let o=a;o.lon!==void 0&&(o=[o.lon,o.lat]);const M=E(s),v=M.px(o,y),l=M.ll([v[0]-i[0]/2,v[1]-i[1]/2],y),m=M.ll([v[0]+i[0]/2,v[1]+i[1]/2],y);return[l[0],m[1],m[0],l[1]]}const k=document.getElementById("btn-back");k.addEventListener("click",()=>{window.location.href="../index.html"});P.accessToken="pk.eyJ1Ijoib3J1Y2JlIiwiYSI6ImNsbTZuZGxrZjBoN3czamxnM2V6aHBiZGEifQ.Fami0mGh65buxFjfJ0Ppjg";const u=new P.Map({center:[29,41.015137],container:"mapContainer",style:"mapbox://styles/mapbox/streets-v12",zoom:11});u.on("load",()=>{u.addSource("polygons",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),u.addLayer({id:"polygons",source:"polygons",type:"fill",paint:{"fill-color":["get","color"],"fill-opacity":.5}}),A(),u.on("moveend",A),u.on("click",a=>{console.log(a.point,a.lngLat),console.log(a.target.unproject(a.point)),console.log(a.target.unproject({x:100,y:100})),console.log(a.target.getBounds())})});const A=()=>{const a=u.getBounds().toArray(),y=B(a.flat()),i={width:Number(u.getCanvas().style.width.replace("px","")),height:Number(u.getCanvas().style.height.replace("px",""))};let s=.65,o=.65;i.width/i.height<1&&(s=.7,o=.7);const v=G(u.getCenter().toArray(),u.getZoom(),[i.width*s,i.height*o],512),l=B(v),m={x:64,y:i.height-64},g={x:i.width-64,y:i.height-64},e={x:i.width-64,y:64},t={x:64,y:64},r=u.unproject(m),c=u.unproject(g),x=u.unproject(e),d=u.unproject(t),p={type:"Polygon",coordinates:[[r.toArray(),c.toArray(),x.toArray(),d.toArray(),r.toArray()]]},n=F(p);console.log(n);const h=B(n);u.getSource("polygons").setData({type:"FeatureCollection",features:[{type:"Feature",properties:{color:"red"},geometry:y.geometry},{type:"Feature",properties:{color:"blue"},geometry:l.geometry},{type:"Feature",properties:{color:"green"},geometry:p},{type:"Feature",properties:{color:"yellow"},geometry:h.geometry}]})};
